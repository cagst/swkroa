<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
  <th:block th:replace="fragments/common :: head" />
</head>

<body>
<div th:replace="fragments/main :: header"></div>
<div th:replace="fragments/main :: navigation"></div>

<div id="page-content" data-ng-app="swkroaApp" data-ng-controller="memberController">
  <input id="membershipUID" type="hidden" th:value="${membershipUID}"/>
  <input id="isPrimaryMember" type="hidden" th:value="${isPrimaryMember}"/>

  <!-- View Member(ship) -->
  <div data-ng-show="membership && view == 'view'">
    <h1 data-ng-if="membership.primaryMember.memberType.memberTypeMeaning == 'ASSOCIATE'">
      <span th:text="#{member.type.associate}">zzz Associate</span>
    </h1>
    <h1 data-ng-if="membership.primaryMember.memberType.memberTypeMeaning == 'FAMILY_HEAD'">
      <span th:text="#{member.type.family}">zzz Family</span>
    </h1>
    <h1 data-ng-if="membership.primaryMember.memberType.memberTypeMeaning == 'REGULAR'">
      <span th:text="#{member.type.regular}">zzz Regular</span>
    </h1>

    <!-- Primary Member / Membership -->
    <div class="panel panel-default">
      <div class="panel-heading">
        <span class="panel-title" th:text="#{member.primary.heading}">
          zzz Primary Member
        </span>
      </div>

      <div class="panel-body">
        <!-- Primary Member -->
        <div>
          <span data-ng-bind="membership.membershipName" class="lead lead-in">zzz Membership Name</span>
          <small>(<span data-ng-bind="membership.primaryMember.ownerIdent">zzz Owner Id</span>)</small>
          <span th:text="#{member.membership.member.since}"
                data-ng-if="membership.joinDate != null" class="pull-right">
            zzz Member Since
          </span>
        </div>

        <!-- Spouse -->
        <div data-ng-show="membership.spouse">
          <span th:text="#{member.spouse}">zzz Spouse</span>
          <small>(<span data-ng-bind="membership.spouse.ownerIdent">zzz Spouse Owner Id</span>)</small>
        </div>

        <!-- Dues -->
        <div>
          <span th:text="#{member.membership.dues}">
            zzz Dues Of
          </span>
          <span class="pull-right text-danger"
                th:text="#{member.membership.pastdue}"
                data-ng-show="membership.balance < 0">
            zzz Past Due
          </span>
          <span class="pull-right text-success"
                th:text="#{member.membership.credit}"
                data-ng-show="membership.balance > 0">
            zzz Credit
          </span>
          <span class="pull-right"
                th:text="#{member.membership.paid}"
                data-ng-show="membership.balance === 0">
            zzz Paid
          </span>
        </div>

        <div class="row">
          <!-- Addresses -->
          <div class="col-xs-4">
            <div>
              <h4 class="divider-bottom">Addresses</h4>

              <div class="row"
                   data-ng-repeat="address in membership.primaryMember.addresses"
                   data-ng-show="membership.primaryMember.addresses.length > 0">
                <div class="col-xs-3">
                  <strong data-ng-bind="contactService.getAddressTypeDisplay(address, addressTypes)"></strong>
                </div>
                <div class="col-xs-9">
                  <div data-ng-bind="address.addressLine1"></div>
                  <div data-ng-bind="address.addressLine2"></div>
                  <div data-ng-bind="address.addressLine3"></div>
                  <div data-ng-bind-template="{{address.city}}, {{address.state}} {{address.postalCode | zip}}"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Phone Numbers -->
          <div class="col-xs-4">
            <div>
              <h4 class="divider-bottom">Phone Numbers</h4>

              <div class="row"
                   data-ng-repeat="phone in membership.primaryMember.phoneNumbers"
                   data-ng-show="membership.primaryMember.phoneNumbers.length > 0">
                <div class="col-xs-3">
                  <strong data-ng-bind="contactService.getPhoneTypeDisplay(phone, phoneTypes)"></strong>
                </div>
                <div class="col-xs-9">
                  <span data-ng-bind-template="{{phone.phoneNumber | tel}}"></span>
                  <span data-ng-show="phone.phoneExtension" data-ng-bind-template="Ext. {{phone.phoneExtension}}"></span>
                </div>
              </div>
            </div>
          </div>

          <!-- Email Addresses -->
          <div class="col-xs-4">
            <div>
              <h4 class="divider-bottom">Email Addresses</h4>

              <div class="row"
                   data-ng-repeat="email in membership.primaryMember.emailAddresses"
                   data-ng-show="membership.primaryMember.emailAddresses.length > 0">
                <div class="col-xs-3">
                  <strong data-ng-bind="contactService.getEmailTypeDisplay(email, emailTypes)"></strong>
                </div>
                <div class="col-xs=9">
                  <span data-ng-bind="email.emailAddress"></span>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>

    <!-- Additional Members -->
    <div class="panel panel-default">
      <div class="panel-heading">
        <span class="panel-title" th:text="#{member.family.heading}">
          zzz Family Members
        </span>
      </div>

      <div class="panel-body">
        <div class="list-group constrain-view-sm">
          <div class="list-group-item alt-list-group-item" data-ng-repeat="member in membership.members"
               data-ng-show="!member.memberType.primary && member.memberType.memberTypeMeaning !== 'SPOUSE'">
            <div>
              <span data-ng-bind="member.memberName" class="lead lead-in">zzz Member Name</span>
              <small>(<span data-ng-bind="member.ownerIdent">zzz Owner Id</span>)</small>
              <span th:text="#{member.family.member.since}"
                    data-ng-if="member.joinDate != null" class="pull-right">
                zzz Member Since
              </span>
            </div>

            <div class="row">
              <!-- Addresses -->
              <div class="col-xs-4">
                <div>
                  <h4 class="divider-bottom">Addresses</h4>

                  <div class="row"
                       data-ng-repeat="address in member.addresses"
                       data-ng-show="member.addresses.length > 0">
                    <div class="col-xs-3">
                      <strong data-ng-bind="contactService.getAddressTypeDisplay(address, addressTypes)"></strong>
                    </div>
                    <div class="col-xs-9">
                      <div data-ng-bind="address.addressLine1"></div>
                      <div data-ng-bind="address.addressLine2"></div>
                      <div data-ng-bind="address.addressLine3"></div>
                      <div data-ng-bind-template="{{address.city}}, {{address.state}} {{address.postalCode | zip}}"></div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Phone Numbers -->
              <div class="col-xs-4">
                <div>
                  <h4 class="divider-bottom">Phone Numbers</h4>

                  <div class="row"
                       data-ng-repeat="phone in member.phoneNumbers"
                       data-ng-show="member.phoneNumbers.length > 0">
                    <div class="col-xs-3">
                      <strong data-ng-bind="contactService.getPhoneTypeDisplay(phone, phoneTypes)"></strong>
                    </div>
                    <div class="col-xs-9">
                      <span data-ng-bind-template="{{phone.phoneNumber | tel}}"></span>
                      <span data-ng-show="phone.phoneExtension" data-ng-bind-template="Ext. {{phone.phoneExtension}}"></span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Email Addresses -->
              <div class="col-xs-4">
                <div>
                  <h4 class="divider-bottom">Email Addresses</h4>

                  <div class="row"
                       data-ng-repeat="email in member.emailAddresses"
                       data-ng-show="member.emailAddresses.length > 0">
                    <div class="col-xs-3">
                      <strong data-ng-bind="contactService.getEmailTypeDisplay(email, emailTypes)"></strong>
                    </div>
                    <div class="col-xs=9">
                      <span data-ng-bind="email.emailAddress"></span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>

    <button type="button" class="btn btn-primary"
            data-ng-click="editMembership()">
      <i class="fa fa-edit"></i>
      <span th:text="#{com.cagst.swkroa.edit}">zzz Edit</span>
    </button>
  </div>

  <!-- Modify (Add/Edit) Membership -->
  <div data-ng-show="membership && view == 'edit'">
    <div class="page-header">
      <h3 th:text="#{com.cagst.swkroa.membership.edit}">zzz Edit Membership</h3>
    </div>

    <form method="POST" name="membershipForm" novalidate data-ng-submit="save()" class="css-form">
      <div th:include="member/modify/section_membership"></div>
      <div th:include="member/modify/section_counties"></div>
      <div th:include="member/modify/section_members"
           data-ng-show="membership.primaryMember.memberType.allowMember ||
                         membership.members.length > 0"></div>

      <div class="spacer-top">
        <div class="divider-top">
          <div class="spacer-top">
            <button type="submit"
                    class="btn btn-primary"
                    th:text="#{com.cagst.swkroa.membership.create}"
                    data-ng-show="membership.membershipUID == 0"
                    data-ng-disabled="membershipForm.$invalid">
            </button>
            <button type="submit"
                    class="btn btn-primary"
                    th:text="#{com.cagst.swkroa.membership.update}"
                    data-ng-show="membership.membershipUID > 0"
                    data-ng-disabled="hasChanges(membership) || membershipForm.$invalid">
            </button>
            <button type="button" class="btn btn-default"
                    data-ng-click="cancelChanges()"
                    th:text="#{com.cagst.swkroa.cancel}">
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>

</div>

  <script type="text/javascript" th:src="@{/static/js/member/member.js}"></script>
</body>
</html>